<?php

class bibleplan {
    function getVersion() {
        return '1.0.1';
    }

    function getId() {
        return 'esvpsalmsandwisdomliterature';
    }

    function getAbbv() {
        return 'epwl';
    }

    function getName() {
        return 'Psalms and Wisdom Literature';
    }

    function getInfo() {
        $info = "Psalm and Wisdom Literature<br /><a target='_new' href='http://www.esv.org/biblereadingplans'>www.esv.org</a>";
        return $info;
    }

    function getData() {
        $data = array(
            1 => 'Ecclesiastes 3:1-8',
            2 => 'Psalm 1',
            3 => 'Psalm 2',
            4 => 'Psalm 3',
            5 => 'Psalm 4',
            6 => 'Psalm 5',
            7 => 'Psalm 6',
            8 => 'Psalm 7',
            9 => 'Psalm 8',
            10 => 'Psalm 9',
            11 => 'Psalm 10',
            12 => 'Psalm 11',
            13 => 'Psalm 12',
            14 => 'Psalm 13',
            15 => 'Psalm 14',
            16 => 'Psalm 15',
            17 => 'Psalm 16',
            18 => 'Psalm 17',
            19 => 'Psalm 18',
            20 => 'Psalm 19',
            21 => 'Psalm 20',
            22 => 'Psalm 21',
            23 => 'Psalm 22',
            24 => 'Psalm 23',
            25 => 'Psalm 24',
            26 => 'Psalm 25',
            27 => 'Psalm 26',
            28 => 'Psalm 27',
            29 => 'Psalm 28',
            30 => 'Psalm 29',
            31 => 'Psalm 30',
            32 => 'Psalm 31',
            33 => 'Psalm 32',
            34 => 'Psalm 33',
            35 => 'Psalm 34',
            36 => 'Psalm 35',
            37 => 'Psalm 36',
            38 => 'Psalm 37',
            39 => 'Psalm 38',
            40 => 'Psalm 39',
            41 => 'Psalm 40',
            42 => 'Psalm 41',
            43 => 'Psalm 42-43',
            44 => 'Psalm 44',
            45 => 'Psalm 45',
            46 => 'Psalm 46',
            47 => 'Psalm 47',
            48 => 'Psalm 48',
            49 => 'Psalm 49',
            50 => 'Psalm 50',
            51 => 'Psalm 51',
            52 => 'Psalm 52',
            53 => 'Psalm 53',
            54 => 'Psalm 54',
            55 => 'Psalm 55',
            56 => 'Psalm 56',
            57 => 'Psalm 57',
            58 => 'Psalm 58',
            59 => 'Psalm 59',
            60 => 'Psalm 60',
            61 => 'Psalm 61',
            62 => 'Psalm 62',
            63 => 'Psalm 63',
            64 => 'Psalm 64',
            65 => 'Psalm 65',
            66 => 'Psalm 66',
            67 => 'Psalm 67',
            68 => 'Psalm 68',
            69 => 'Psalm 69',
            70 => 'Psalm 70',
            71 => 'Psalm 71',
            72 => 'Psalm 72',
            73 => 'Psalm 73',
            74 => 'Psalm 74',
            75 => 'Psalm 75',
            76 => 'Psalm 76',
            77 => 'Psalm 77',
            78 => 'Psalm 78',
            79 => 'Psalm 79',
            80 => 'Psalm 80',
            81 => 'Psalm 81',
            82 => 'Psalm 82',
            83 => 'Psalm 83',
            84 => 'Psalm 84',
            85 => 'Psalm 85',
            86 => 'Psalm 86',
            87 => 'Psalm 87',
            88 => 'Psalm 88',
            89 => 'Psalm 89',
            90 => 'Psalm 90',
            91 => 'Psalm 91',
            92 => 'Psalm 92',
            93 => 'Psalm 93',
            94 => 'Psalm 94',
            95 => 'Psalm 95',
            96 => 'Psalm 96',
            97 => 'Psalm 97',
            98 => 'Psalm 98',
            99 => 'Psalm 99',
            100 => 'Psalm 100',
            101 => 'Psalm 101',
            102 => 'Psalm 102',
            103 => 'Psalm 103',
            104 => 'Psalm 104',
            105 => 'Psalm 105',
            106 => 'Psalm 106',
            107 => 'Psalm 107',
            108 => 'Psalm 108',
            109 => 'Psalm 109',
            110 => 'Psalm 110',
            111 => 'Psalm 111',
            112 => 'Psalm 112',
            113 => 'Psalm 113',
            114 => 'Psalm 114',
            115 => 'Psalm 115',
            116 => 'Psalm 116',
            117 => 'Psalm 117',
            118 => 'Psalm 118',
            119 => 'Psalm 119:1-88',
            120 => 'Psalm 119:89-176',
            121 => 'Psalm 120',
            122 => 'Psalm 121',
            123 => 'Psalm 122',
            124 => 'Psalm 123',
            125 => 'Psalm 124',
            126 => 'Psalm 125',
            127 => 'Psalm 126',
            128 => 'Psalm 127',
            129 => 'Psalm 128',
            130 => 'Psalm 129',
            131 => 'Psalm 130',
            132 => 'Psalm 131',
            133 => 'Psalm 132',
            134 => 'Psalm 133',
            135 => 'Psalm 134',
            136 => 'Psalm 135',
            137 => 'Psalm 136',
            138 => 'Psalm 137',
            139 => 'Psalm 138',
            140 => 'Psalm 139',
            141 => 'Psalm 140',
            142 => 'Psalm 141',
            143 => 'Psalm 142',
            144 => 'Psalm 143',
            145 => 'Psalm 144',
            146 => 'Psalm 145',
            147 => 'Psalm 146',
            148 => 'Psalm 147',
            149 => 'Psalm 148',
            150 => 'Psalm 149',
            151 => 'Psalm 150',
            152 => 'Proverbs 1:1-7',
            153 => 'Proverbs 1:8-19',
            154 => 'Proverbs 1:20-33',
            155 => 'Proverbs 2',
            156 => 'Proverbs 3:1-12',
            157 => 'Proverbs 3:13-20',
            158 => 'Proverbs 3:21-35',
            159 => 'Proverbs 4',
            160 => 'Proverbs 5',
            161 => 'Proverbs 6:1-19',
            162 => 'Proverbs 6:20-35',
            163 => 'Proverbs 7',
            164 => 'Proverbs 8',
            165 => 'Proverbs 9',
            166 => 'Proverbs 10',
            167 => 'Proverbs 11-12',
            168 => 'Proverbs 13-14',
            169 => 'Proverbs 15-16',
            170 => 'Proverbs 17-18',
            171 => 'Proverbs 19-20',
            172 => 'Proverbs 21-22',
            173 => 'Proverbs 23-24',
            174 => 'Proverbs 25-26',
            175 => 'Proverbs 27-28',
            176 => 'Proverbs 29',
            177 => 'Proverbs 30:1-31:9',
            178 => 'Proverbs 31:10-31',
            179 => 'Ecclesiastes 1:1-3',
            180 => 'Ecclesiastes 1:4-11',
            181 => 'Ecclesiastes 1:12-18',
            182 => 'Ecclesiastes 2:1-11',
            183 => 'Ecclesiastes 2:12-17',
            184 => 'Ecclesiastes 2:18-23',
            185 => 'Ecclesiastes 2:24-26',
            186 => 'Ecclesiastes 3:1-8',
            187 => 'Ecclesiastes 3:9-22',
            188 => 'Ecclesiastes 4',
            189 => 'Ecclesiastes 5:1-7',
            190 => 'Ecclesiastes 5:8-17',
            191 => 'Ecclesiastes 5:18-20',
            192 => 'Ecclesiastes 6',
            193 => 'Ecclesiastes 7:1-14',
            194 => 'Ecclesiastes 7:15-29',
            195 => 'Ecclesiastes 8',
            196 => 'Ecclesiastes 9:1-10',
            197 => 'Ecclesiastes 9:11-18',
            198 => 'Ecclesiastes 10',
            199 => 'Ecclesiastes 11:1-8',
            200 => 'Ecclesiastes 11:9-12:8',
            201 => 'Ecclesiastes 12:9-14',
            202 => 'SongOfSongs 1:1-8',
            203 => 'SongOfSongs 1:9-2:7',
            204 => 'SongOfSongs 2:8-17',
            205 => 'SongOfSongs 3',
            206 => 'SongOfSongs 4:1-8',
            207 => 'SongOfSongs 4:9-5:1',
            208 => 'SongOfSongs 5:2-9',
            209 => 'SongOfSongs 5:10-6:3',
            210 => 'SongOfSongs 6:4-12',
            211 => 'SongOfSongs 6:13-7:9',
            212 => 'SongOfSongs 7:10-13',
            213 => 'SongOfSongs 8:1-7',
            214 => 'SongOfSongs 8:8-14',
            215 => 'Psalm 1',
            216 => 'Psalm 2',
            217 => 'Psalm 3',
            218 => 'Psalm 4',
            219 => 'Psalm 5',
            220 => 'Psalm 6',
            221 => 'Psalm 7',
            222 => 'Psalm 8',
            223 => 'Psalm 9',
            224 => 'Psalm 10',
            225 => 'Psalm 11',
            226 => 'Psalm 12',
            227 => 'Psalm 13',
            228 => 'Psalm 14',
            229 => 'Psalm 15',
            230 => 'Psalm 16',
            231 => 'Psalm 17',
            232 => 'Psalm 18',
            233 => 'Psalm 19',
            234 => 'Psalm 20',
            235 => 'Psalm 21',
            236 => 'Psalm 22',
            237 => 'Psalm 23',
            238 => 'Psalm 24',
            239 => 'Psalm 25',
            240 => 'Psalm 26',
            241 => 'Psalm 27',
            242 => 'Psalm 28',
            243 => 'Psalm 29',
            244 => 'Psalm 30',
            245 => 'Psalm 31',
            246 => 'Psalm 32',
            247 => 'Psalm 33',
            248 => 'Psalm 34',
            249 => 'Psalm 35',
            250 => 'Psalm 36',
            251 => 'Psalm 37',
            252 => 'Psalm 38',
            253 => 'Psalm 39',
            254 => 'Psalm 40',
            255 => 'Psalm 41',
            256 => 'Psalm 42-43',
            257 => 'Psalm 44',
            258 => 'Psalm 45',
            259 => 'Psalm 46',
            260 => 'Psalm 47',
            261 => 'Psalm 48',
            262 => 'Psalm 49',
            263 => 'Psalm 50',
            264 => 'Psalm 51',
            265 => 'Psalm 52',
            266 => 'Psalm 53',
            267 => 'Psalm 54',
            268 => 'Psalm 55',
            269 => 'Psalm 56',
            270 => 'Psalm 57',
            271 => 'Psalm 58',
            272 => 'Psalm 59',
            273 => 'Psalm 60',
            274 => 'Psalm 61',
            275 => 'Psalm 62',
            276 => 'Psalm 63',
            277 => 'Psalm 64',
            278 => 'Psalm 65',
            279 => 'Psalm 66',
            280 => 'Psalm 67',
            281 => 'Psalm 68',
            282 => 'Psalm 69',
            283 => 'Psalm 70',
            284 => 'Psalm 71',
            285 => 'Psalm 72',
            286 => 'Psalm 73',
            287 => 'Psalm 74',
            288 => 'Psalm 75',
            289 => 'Psalm 76',
            290 => 'Psalm 77',
            291 => 'Psalm 78',
            292 => 'Psalm 79',
            293 => 'Psalm 80',
            294 => 'Psalm 81',
            295 => 'Psalm 82',
            296 => 'Psalm 83',
            297 => 'Psalm 84',
            298 => 'Psalm 85',
            299 => 'Psalm 86',
            300 => 'Psalm 87',
            301 => 'Psalm 88',
            302 => 'Psalm 89',
            303 => 'Psalm 90',
            304 => 'Psalm 91',
            305 => 'Psalm 92',
            306 => 'Psalm 93',
            307 => 'Psalm 94',
            308 => 'Psalm 95',
            309 => 'Psalm 96',
            310 => 'Psalm 97',
            311 => 'Psalm 98',
            312 => 'Psalm 99',
            313 => 'Psalm 100',
            314 => 'Psalm 101',
            315 => 'Psalm 102',
            316 => 'Psalm 103',
            317 => 'Psalm 104',
            318 => 'Psalm 105',
            319 => 'Psalm 106',
            320 => 'Psalm 107',
            321 => 'Psalm 108',
            322 => 'Psalm 109',
            323 => 'Psalm 110',
            324 => 'Psalm 111',
            325 => 'Psalm 112',
            326 => 'Psalm 113',
            327 => 'Psalm 114',
            328 => 'Psalm 115',
            329 => 'Psalm 116',
            330 => 'Psalm 117',
            331 => 'Psalm 118',
            332 => 'Psalm 119:1-88',
            333 => 'Psalm 119:89-176',
            334 => 'Psalm 120',
            335 => 'Psalm 121',
            336 => 'Psalm 122',
            337 => 'Psalm 123',
            338 => 'Psalm 124',
            339 => 'Psalm 125',
            340 => 'Psalm 126',
            341 => 'Psalm 127',
            342 => 'Psalm 128',
            343 => 'Psalm 129',
            344 => 'Psalm 130',
            345 => 'Psalm 131',
            346 => 'Psalm 132',
            347 => 'Psalm 133',
            348 => 'Psalm 134',
            349 => 'Psalm 135',
            350 => 'Psalm 136',
            351 => 'Psalm 137',
            352 => 'Psalm 138',
            353 => 'Psalm 139',
            354 => 'Psalm 140',
            355 => 'Psalm 141',
            356 => 'Psalm 142',
            357 => 'Psalm 143',
            358 => 'Psalm 144',
            359 => 'Psalm 145',
            360 => 'Psalm 146',
            361 => 'Psalm 147',
            362 => 'Psalm 148',
            363 => 'Psalm 149',
            364 => 'Psalm 150',
            365 => 'Psalm 90'
        );
        return $data;
    }
}
$bibleplan = new bibleplan();

/**
 * Prepares data for json by trimming it and removing any partial verse annotations
 * @param  array $day Bible references for a day
 * @return array      Pepared bible references
 */
function prepare($day) {
      $references = array();
      foreach (explode(";", $day) as $ref) {
            if (strpos($ref, ",") !== FALSE) {
                  foreach (explode(",", $ref) as $str) {
                        $references[] = trim(preg_replace('/[a-z]{1}(?=-|$)/', '', $str));
                  }
            } else {
                  $references[] = trim(preg_replace('/[a-z]{1}(?=-|$)/', '', $ref));
            }
      }
      return $references;
}
$plan = array();
$tmp_plan = array();
$tmp_plan2 = array();
foreach ($bibleplan->getData() as $day) {
   $d = prepare($day);
   $tmp_plan[] = $d;
   $tmp_plan2 = array_merge($tmp_plan2, $d);
}

$plan['data2'] = $tmp_plan;
$plan['data'] = $tmp_plan2;
$plan['id'] = $bibleplan->getId();
$plan['abbv'] = $bibleplan->getAbbv();
$plan['name'] = $bibleplan->getName();
$plan['info'] = $bibleplan->getInfo();

$plan_json = json_encode($plan);

file_put_contents($bibleplan->getId().'.json', $plan_json);
?>
